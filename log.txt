log

(fcdc) xiaozeyu@GPU-4090-29:/big-data/person/xiaozeyu/FSDC/feature-compress-incremental$ python -m src.baselines.linear_probe   --paths configs/paths.yaml   --task_cfg configs/coco_10cls.yaml   --backbone "ViT-B-16"   --pretrained "/big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16"   --epochs 5 --batch_size 128 --lr 1e-3   --save_dir outputs/linear_probe --use_cache
2025-10-10 18:32:32.060 | INFO     | src.utils.common:log_experiment_info:102 - ===== 实验配置 =====
2025-10-10 18:32:32.060 | INFO     | src.utils.common:log_experiment_info:104 - coco_root: /big-data/dataset-academic/COCO/train2017
2025-10-10 18:32:32.060 | INFO     | src.utils.common:log_experiment_info:104 - annotation_file: /big-data/dataset-academic/COCO/annotations/instances_train2017.json
2025-10-10 18:32:32.060 | INFO     | src.utils.common:log_experiment_info:104 - train_list: /big-data/person/xiaozeyu/FSDC/indices/train_list.txt
2025-10-10 18:32:32.060 | INFO     | src.utils.common:log_experiment_info:104 - val_list: /big-data/person/xiaozeyu/FSDC/indices/val_list.txt
2025-10-10 18:32:32.060 | INFO     | src.utils.common:log_experiment_info:104 - new_train_list: /big-data/person/xiaozeyu/FSDC/indices/new_train_list.txt
2025-10-10 18:32:32.060 | INFO     | src.utils.common:log_experiment_info:104 - new_val_list: /big-data/person/xiaozeyu/FSDC/indices/new_val_list.txt
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - class_map: /big-data/person/xiaozeyu/FSDC/indices/class_map.json
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - cache_root: /big-data/person/xiaozeyu/FSDC/outputs/cache
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - image_size: 224
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - class_ids: [1, 3, 18, 17, 2, 6, 8, 9, 62, 15]
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - class_names: ['person', 'car', 'dog', 'cat', 'bicycle', 'bus', 'truck', 'boat', 'chair', 'bench']
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - compress_options: [16, 32, 64]
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - use_patch: False
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - train_ratio: 0.85
2025-10-10 18:32:32.061 | INFO     | src.utils.common:log_experiment_info:104 - split_seed: 42
2025-10-10 18:32:32.062 | INFO     | src.utils.common:log_experiment_info:104 - epochs: 5
2025-10-10 18:32:32.062 | INFO     | src.utils.common:log_experiment_info:104 - batch_size: 128
2025-10-10 18:32:32.062 | INFO     | src.utils.common:log_experiment_info:104 - lr: 0.001
2025-10-10 18:32:32.062 | INFO     | src.utils.common:log_experiment_info:104 - weight_decay: 0.0
2025-10-10 18:32:32.062 | INFO     | src.utils.common:log_experiment_info:104 - backbone: ViT-B-16
2025-10-10 18:32:32.062 | INFO     | src.utils.common:log_experiment_info:104 - pretrained: /big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16
2025-10-10 18:32:32.062 | INFO     | src.utils.common:log_experiment_info:104 - use_cache: True
2025-10-10 18:32:34.088 | INFO     | src.utils.common:__enter__:87 - 开始计时: 提取train特征
2025-10-10 18:53:25.393 | INFO     | src.utils.common:__exit__:92 - 结束计时: 提取train特征, 耗时 1251.30 秒
2025-10-10 18:53:25.621 | INFO     | src.utils.common:__enter__:87 - 开始计时: 提取val特征
2025-10-10 18:56:57.386 | INFO     | src.utils.common:__exit__:92 - 结束计时: 提取val特征, 耗时 211.76 秒
Epoch 1: val_loss=0.3510 top1=0.8893 top5=0.9957
Epoch 2: val_loss=0.3144 top1=0.8977 top5=0.9963
Epoch 3: val_loss=0.3021 top1=0.9015 top5=0.9965
Epoch 4: val_loss=0.2958 top1=0.9039 top5=0.9968
Epoch 5: val_loss=0.2926 top1=0.9038 top5=0.9971
Traceback (most recent call last):
  File "/ssd-data/anaconda3/envs/fcdc/lib/python3.10/runpy.py", line 196, in _run_module_as_main
    return _run_code(code, main_globals, None,
  File "/ssd-data/anaconda3/envs/fcdc/lib/python3.10/runpy.py", line 86, in _run_code
    exec(code, run_globals)
  File "/big-data/person/xiaozeyu/FSDC/feature-compress-incremental/src/baselines/linear_probe.py", line 136, in <module>
    main()  # 执行主函数
  File "/big-data/person/xiaozeyu/FSDC/feature-compress-incremental/src/baselines/linear_probe.py", line 131, in main
    plot_confusion(confusion, class_names, args.save_dir / 'confusion_linear.png')  # 绘制混淆矩阵
  File "/big-data/person/xiaozeyu/FSDC/feature-compress-incremental/src/utils/metrics.py", line 41, in plot_confusion
    ax.set_xticklabels(class_names, rotation=45, ha='right')  # 设置横轴标签
  File "/ssd-data/anaconda3/envs/fcdc/lib/python3.10/site-packages/matplotlib/axes/_base.py", line 74, in wrapper
    return get_method(self)(*args, **kwargs)
  File "/ssd-data/anaconda3/envs/fcdc/lib/python3.10/site-packages/matplotlib/axis.py", line 2106, in set_ticklabels
    raise ValueError(
ValueError: The number of FixedLocator locations (11), usually from a call to set_ticks, does not match the number of labels (10).



(fcdc) xiaozeyu@GPU-4090-29:/big-data/person/xiaozeyu/FSDC/feature-compress-incremental$ python -m src.train_initial \
>   --paths configs/paths.yaml \
>   --task_cfg configs/coco_10cls.yaml \
>   --backbone "ViT-B-16" \
>   --pretrained "/big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16" \
>   --n_compress 32 \
>   --epochs 5 --batch_size 128 --lr 1e-3 \
>   --save_dir outputs/compress32_initial --use_cache

2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:102 - ===== 实验配置 =====
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - coco_root: /big-data/dataset-academic/COCO/train2017
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - annotation_file: /big-data/dataset-academic/COCO/annotations/instances_train2017.json
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - train_list: /big-data/person/xiaozeyu/FSDC/indices/train_list.txt
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - val_list: /big-data/person/xiaozeyu/FSDC/indices/val_list.txt
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - new_train_list: /big-data/person/xiaozeyu/FSDC/indices/new_train_list.txt
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - new_val_list: /big-data/person/xiaozeyu/FSDC/indices/new_val_list.txt
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - class_map: /big-data/person/xiaozeyu/FSDC/indices/class_map.json
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - cache_root: /big-data/person/xiaozeyu/FSDC/outputs/cache
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - image_size: 224
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - class_ids: [1, 3, 18, 17, 2, 6, 8, 9, 62, 15]
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - class_names: ['person', 'car', 'dog', 'cat', 'bicycle', 'bus', 'truck', 'boat', 'chair', 'bench']
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - compress_options: [16, 32, 64]
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - use_patch: False
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - train_ratio: 0.85
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - split_seed: 42
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - n_compress: 32
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - epochs: 5
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - batch_size: 128
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - lr: 0.001
2025-10-10 19:50:52.771 | INFO     | src.utils.common:log_experiment_info:104 - weight_decay: 0.0001
2025-10-10 19:50:52.772 | INFO     | src.utils.common:log_experiment_info:104 - backbone: ViT-B-16
2025-10-10 19:50:52.772 | INFO     | src.utils.common:log_experiment_info:104 - pretrained: /big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16
2025-10-10 19:50:52.772 | INFO     | src.utils.common:log_experiment_info:104 - use_cache: True
2025-10-10 19:50:52.772 | INFO     | src.utils.common:log_experiment_info:104 - dummy: False
2025-10-10 19:50:52.772 | INFO     | src.utils.common:log_experiment_info:104 - task_name: coco_task
2025-10-10 19:50:54.828 | INFO     | src.utils.common:load_feature_cache:68 - 加载缓存特征: /big-data/person/xiaozeyu/FSDC/outputs/cache/ViT-B-16_size224_train.pt
2025-10-10 19:50:54.978 | INFO     | src.utils.common:load_feature_cache:68 - 加载缓存特征: /big-data/person/xiaozeyu/FSDC/outputs/cache/ViT-B-16_size224_val.pt
Epoch 1: train_loss=0.4610 val_loss=0.3126 top1=0.8977 top5=0.9961
Epoch 2: train_loss=0.2879 val_loss=0.2976 top1=0.9028 top5=0.9968
Epoch 3: train_loss=0.2731 val_loss=0.2902 top1=0.9060 top5=0.9968
Epoch 4: train_loss=0.2648 val_loss=0.2942 top1=0.9020 top5=0.9968
Epoch 5: train_loss=0.2602 val_loss=0.2922 top1=0.9043 top5=0.9967
(fcdc) xiaozeyu@GPU-4090-29:/big-data/person/xiaozeyu/FSDC/feature-compress-incremental$ 
(fcdc) xiaozeyu@GPU-4090-29:/big-data/person/xiaozeyu/FSDC/feature-compress-incremental$ 


(fcdc) xiaozeyu@GPU-4090-29:/big-data/person/xiaozeyu/FSDC/feature-compress-incremental$ python -m src.add_class_incremental   --paths configs/paths.yaml   --task_cfg configs/coco_add_cls.yaml   --backbone "ViT-B-16"   --pretrained "/big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16"   --resume_ckpt outputs/compress32_initial/best.ckpt   --n_compress 32   --epochs 1 --batch_size 128 --lr 1e-3   --save_dir outputs/compress32_addcls --use_cache
2025-10-14 01:14:20.891 | INFO     | src.utils.common:log_experiment_info:102 - ===== 实验配置 =====
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - coco_root: /big-data/dataset-academic/COCO/train2017
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - annotation_file: /big-data/dataset-academic/COCO/annotations/instances_train2017.json
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - train_list: /big-data/person/xiaozeyu/FSDC/indices/train_list.txt
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - val_list: /big-data/person/xiaozeyu/FSDC/indices/val_list.txt
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - new_train_list: /big-data/person/xiaozeyu/FSDC/indices/new_train_list.txt
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - new_val_list: /big-data/person/xiaozeyu/FSDC/indices/new_val_list.txt
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - class_map: /big-data/person/xiaozeyu/FSDC/indices/class_map.json
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - cache_root: /big-data/person/xiaozeyu/FSDC/outputs/cache
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - image_size: 224
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - new_class_ids: [4]
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - new_class_names: ['motorcycle']
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - use_patch: False
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - train_ratio: 0.85
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - split_seed: 42
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - backbone: ViT-B-16
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - pretrained: /big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - n_compress: 32
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - epochs: 1
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - batch_size: 128
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - lr: 0.001
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - weight_decay: 0.0001
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - use_cache: True
2025-10-14 01:14:20.892 | INFO     | src.utils.common:log_experiment_info:104 - task_name: add_class
2025-10-14 01:14:22.546 | INFO     | src.utils.common:load_feature_cache:68 - 加载缓存特征: /big-data/person/xiaozeyu/FSDC/outputs/cache/ViT-B-16_size224_train.pt
2025-10-14 01:14:22.611 | INFO     | src.utils.common:__enter__:87 - 开始计时: 提取train_new特征
2025-10-14 01:14:29.332 | INFO     | src.utils.common:__exit__:92 - 结束计时: 提取train_new特征, 耗时 6.72 秒
2025-10-14 01:14:29.352 | INFO     | src.utils.common:load_feature_cache:68 - 加载缓存特征: /big-data/person/xiaozeyu/FSDC/outputs/cache/ViT-B-16_size224_val.pt
2025-10-14 01:14:29.374 | INFO     | src.utils.common:__enter__:87 - 开始计时: 提取val_new特征
2025-10-14 01:14:31.315 | INFO     | src.utils.common:__exit__:92 - 结束计时: 提取val_new特征, 耗时 1.94 秒
Epoch 1: top1=0.7898 top5=0.9829
(fcdc) xiaozeyu@GPU-4090-29:/big-data/person/xiaozeyu/FSDC/feature-compress-incremental$ 




(fcdc) xiaozeyu@GPU-4090-29:/big-data/person/xiaozeyu/FSDC/feature-compress-incremental$ python -m src.baselines.finetune_replay   --paths configs/paths.yaml   --task_cfg configs/coco_add_cls.yaml   --backbone "ViT-B-16"   --pretrained "/big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16"   --resume_ckpt outputs/linear_probe/best.ckpt   --epochs 1 --batch_size 128 --lr 1e-3   --save_dir outputs/finetune_replay --use_cache
2025-10-14 01:59:30.620 | INFO     | src.utils.common:log_experiment_info:102 - ===== 实验配置 =====
2025-10-14 01:59:30.620 | INFO     | src.utils.common:log_experiment_info:104 - coco_root: /big-data/dataset-academic/COCO/train2017
2025-10-14 01:59:30.620 | INFO     | src.utils.common:log_experiment_info:104 - annotation_file: /big-data/dataset-academic/COCO/annotations/instances_train2017.json
2025-10-14 01:59:30.620 | INFO     | src.utils.common:log_experiment_info:104 - train_list: /big-data/person/xiaozeyu/FSDC/indices/train_list.txt
2025-10-14 01:59:30.620 | INFO     | src.utils.common:log_experiment_info:104 - val_list: /big-data/person/xiaozeyu/FSDC/indices/val_list.txt
2025-10-14 01:59:30.620 | INFO     | src.utils.common:log_experiment_info:104 - new_train_list: /big-data/person/xiaozeyu/FSDC/indices/new_train_list.txt
2025-10-14 01:59:30.620 | INFO     | src.utils.common:log_experiment_info:104 - new_val_list: /big-data/person/xiaozeyu/FSDC/indices/new_val_list.txt
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - class_map: /big-data/person/xiaozeyu/FSDC/indices/class_map.json
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - cache_root: /big-data/person/xiaozeyu/FSDC/outputs/cache
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - image_size: 224
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - new_class_ids: [4]
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - new_class_names: ['motorcycle']
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - use_patch: False
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - train_ratio: 0.85
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - split_seed: 42
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - epochs: 1
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - batch_size: 128
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - lr: 0.001
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - weight_decay: 0.0001
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - backbone: ViT-B-16
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - pretrained: /big-data/person/xiaozeyu/DataDistillation/clip-vit-base-patch16
2025-10-14 01:59:30.621 | INFO     | src.utils.common:log_experiment_info:104 - replay_per_class: 5
2025-10-14 01:59:32.226 | INFO     | src.utils.common:load_feature_cache:68 - 加载缓存特征: /big-data/person/xiaozeyu/FSDC/outputs/cache/ViT-B-16_size224_train.pt
2025-10-14 01:59:32.315 | INFO     | src.utils.common:__enter__:87 - 开始计时: 提取train_new特征
2025-10-14 01:59:39.048 | INFO     | src.utils.common:__exit__:92 - 结束计时: 提取train_new特征, 耗时 6.73 秒
2025-10-14 01:59:39.068 | INFO     | src.utils.common:load_feature_cache:68 - 加载缓存特征: /big-data/person/xiaozeyu/FSDC/outputs/cache/ViT-B-16_size224_val.pt
2025-10-14 01:59:39.090 | INFO     | src.utils.common:__enter__:87 - 开始计时: 提取val_new特征
2025-10-14 01:59:41.015 | INFO     | src.utils.common:__exit__:92 - 结束计时: 提取val_new特征, 耗时 1.93 秒
Epoch 1: top1=0.8658 top5=0.9944










